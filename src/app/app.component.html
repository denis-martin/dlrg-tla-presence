<nav class="navbar mb-2">
	<div class="navbar-brand">
		<img src="assets/images/logo.svg" class="logo">
	</div>
	<div class="navbar-item mr-1" (click)="prepareSync()">
		<span class="navbar-button"><i class="fas fa-sync"></i></span>
	</div>
</nav>
<div class="container">
	
	<form (ngSubmit)="submit()" #presenceForm="ngForm">
		<div class="row pb-3">
			<div class="col-sm-12">
				<div>
					<label for="name">Datum:</label><br>
					<input type="date" id="date" name="date" class="form-control" [(ngModel)]="date">
				</div>
			</div>
		</div>
		<div class="row pb-3">
			<div class="col-sm-12">
				<div class="btn-group btn-group-toggle" style="width: 100%" ngbRadioGroup name="radioBasic" [(ngModel)]="presence">
					<label ngbButtonLabel class="btn-secondary">
						<input ngbButton type="radio" [value]="1"> Anwesend
					</label>
					<label ngbButtonLabel class="btn-secondary">
						<input ngbButton type="radio" [value]="2"> Entschuldigt
					</label>
				</div>
			</div>
		</div>
		<div class="row pb-3">
			<div class="col-sm-5 mb-1">
				<div>
					<!-- <label for="pId">Teilnehmernummer:</label><br> -->
					<input type="number" id="pId" name="pId" placeholder="Teilnehmernummer" class="form-control form-control-large" 
						[(ngModel)]="pId" (blur)="refocus()" (keydown)="keyEvent($event)"> <!-- ng-keydown="keyEvent($event)" ng-blur="refocus()" /> -->
				</div>
			</div>
			<div class="col-sm-7 mb-1">
				<div>
					<!-- <label for="name">Name:</label><br> -->
					<div id="name" class="form-control" style="border: 0" [ngClass]="{'fadeoutgreen': doFadeGreen, 'fadeoutyellow': doFadeYellow, 'fadeoutred': doFadeRed}">
						{{name}}
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12">
				<table id="data" style="width:100%">
					<thead>
						<tr>
							<th>Datum</th><th>Name</th><th>Anw.</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let r of data.records" (click)="edit(r)" style="height: 30pt">
							<td>{{r.date | date:"dd.MM.yyyy"}}</td>
							<td>{{data.participants[r.pId]?.name}} ({{r.pId}})</td>
							<td>
								<span *ngIf="r.presence == 0" class="fas fa-minus" style="color: red"></span>
								<span *ngIf="r.presence == 1" class="fas fa-check" style="color: green"></span>
								<span *ngIf="r.presence == 2" class="fas fa-comment" style="color: rgb(194, 194, 0)"></span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</form>
</div>
